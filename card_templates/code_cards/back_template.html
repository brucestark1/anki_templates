<!-- ===== CARD CONTENT, HINT, TAGS & URL ===== -->

<div class="content_aligned">

    <!------- Content & Hint ------->

    {{Front}}
    <br>

    {{#Hint}}
        <br>
        <div id="hint" class="shown">
            <p class="payload">{{Hint}}</p>
        </div>
    {{/Hint}}

    {{#Back}}
        <!-- Only add horizontal rule if Back is not empty -->
        <hr>
    {{/Back}}

    {{Back}}
    <br>
</div>

<!------- TAGS & URL ------->

<div id="primary-tag-container" style="position: absolute; bottom: 0; left: 11%;">
    <div id="ctag1" class="tag primary left"></div>
        <div id="ctag2" class="tag secondary left"></div>
        <div id="ctag3" class="tag tertiary left"></div>
</div>

<div id="url-container" style="position: absolute; bottom: 0; right: 11%;">
        {{URL}}
</div>


<!-- ===== JAVASCRIPT ===== -->

<!-- mark input fields, fill in answers -->
<script>
    var inputs = document.getElementsByTagName('input');
    for (let i = 0; i < inputs.length; i++) {
        const true_answer = inputs[i].name ?? '';
        const expected = true_answer.replaceAll(' ','');

        const my_answer = window._data[inputs[i].name] ?? '';

        // strip all whitespace and convert smart quotes to normal quotes
        const actual = my_answer
                .replaceAll('“', '"')
                .replaceAll('”', '"')
                .replaceAll('‘', '\'')
                .replaceAll('’', '\'')
                .replaceAll(/\s+/g,'');

        if(actual === expected) {
            inputs[i].style.backgroundColor = 'rgb(124,232,0,1)'
        } else {
            inputs[i].style.backgroundColor = 'rgb(240,128,128,1)'
        }

        inputs[i].value = true_answer;
        inputs[i].style.fontWeight = 'bold';
    }
</script>

<!-- tags -->
<script>
    tag_string = "{{Tags}}".split(" ");
    tag_obj = {};
    tag_string.forEach(tag => {
        tag_list = tag.split("::");
        switch (tag_list[0]) {
            default: tag_obj["content"] = tag_list; break;
        }
    })
    document.querySelector("#ctag1").textContent = tag_obj["content"].join(" - ").split("_").join(" ");
</script>


<!-- URL -->
<script>
    document.querySelector("a").textContent = "Link"
</script>